@{
    Layout = "~/Views/Shared/_Layout.cshtml";

    //in title this could be a question cut to a length of 65 characters total

    ViewBag.Title = "";
}



<div class="row">
    <div class="col-md-12">
        <h2>Viewing a Question.</h2>

        @*
            Question:
            0 - QuestionID, 1 - Question, 2 - Number of Votes, 3 - Category, 4 - Author, 5 - TimeStamp

            NewQuestion.MainQuestion.Question
            NewQuestion.MainQuestion.QuestionID
            NewQuestion.MainQuestion.QuestionDTS
            NewQuestion.MainQuestion.Score
            NewQuestion.MainQuestion.CategoryString
            NewQuestion.MainQuestion.UserName
        *@

        <div id="divQJumbo" class="jumbotron row">
            <div id="divVotes" class="col-md-1">
                <a href="../Home/ViewQuestion?question_id=@Model.MainQuestion.QuestionID&vote=@Model.MainQuestion.Score&math=a">
                    <img src="~/Images/VoteUp.png" width="50" alt="Voting Up Glyphs" />
                </a>
                <div id="divVoteCount">
                    @Model.MainQuestion.Score
                </div>
                <a href="../Home/ViewQuestion?question_id=@Model.MainQuestion.QuestionID&vote=@Model.MainQuestion.Score&math=s">
                    <img src="~/Images/VoteDown.png" width="50" alt="Voting Down Glyphs" />
                </a>
            </div>
            <div id="divQuestion" class="col-md-9">
                <div class="divCategory">
                    @Model.QuestionCategory
                </div>
                @Model.MainQuestion.Question
            </div>
            <div id="divAuthorDetails" class="col-md-2">
                <div id="divGenericPerson">
                    <img src="~/Images/GenericPerson.png" height="70" width="50" alt="Generic Person Photo" />
                </div>
                <div id="divAuthor">@Model.QuestionUserName</div>
                <div id="divTime">@Model.MainQuestion.QuestionDTS</div>
            </div>
            <div class="clearfix"></div>
            <div id="divButtonChoices">
                <a class="btn btn-default btn-sm" href="../Home/Answer?question_id=@Model.MainQuestion.QuestionID">Answer</a>
                <a class="btn btn-default btn-sm" href="../Home/Comment?question_id=@Model.MainQuestion.QuestionID">Comment</a>
            </div>
        </div>

        @*
            Question Comments:
            0 - QuestionID, 1 - CommentID, 2 - Comment, 3 - Author, 4 - TimeStamp
        *@

        @if (Model.RelatedQuestionComments != null)
        {
            for (int i = 0; i < Model.RelatedQuestionComments.Count; i++)
            {
                <div class="divCJumbo jumbotron row">
                    <div class="divComment col-md-10">
                        @Model.RelatedQuestionComments[i].QComment.QComment
                    </div>
                    <div class="divAuthorDetails col-md-2">
                        <div class="divGenericPerson">
                            <img src="~/Images/GenericPerson.png" height="70" width="50" alt="Generic Person Photo" />
                        </div>
                        <div class="divAuthor">@Model.RelatedQuestionComments[i].QCUserName</div>
                        <div class="divTime">@Model.RelatedQuestionComments[i].QComment.QCommentDTS</div>
                    </div>
                    <div class="clearfix"></div>
                </div>
            }
        }
        @*
            Answers:
            0 - QuestionID, 1 - AnswerID, 2 - Answer, 3 - Number of Votes, 4 - is Correct, 5 - Author, 6 - TimeStamp
        *@
    
        @if (Model.RelatedAnswers != null)
        {
            for (int i = 0; i < Model.RelatedAnswers.Count; i++)
            {
                <div class="divAJumbo jumbotron row">
                    <div class="divVotes col-md-1">
                        <a href="../Home/ViewQuestion?question_id=@Model.RelatedAnswers[i].MainAnswer.QuestionID&answer_id=@Model.RelatedAnswers[i].MainAnswer.AnswerID&vote=@Model.RelatedAnswers[i].MainAnswer.Score&math=a">
                            <img src="~/Images/VoteUp.png" width="50" alt="Voting Up Glyphs" />
                        </a>
                        <div class="divVoteCount">
                            @* Voting Data Goes Here *@
                            @Model.RelatedAnswers[i].MainAnswer.Score
                        </div>
                        <a href="../Home/ViewQuestion?question_id=@Model.RelatedAnswers[i].MainAnswer.QuestionID&answer_id=@Model.RelatedAnswers[i].MainAnswer.AnswerID&vote=@Model.RelatedAnswers[i].MainAnswer.Score&math=s">
                            <img src="~/Images/VoteDown.png" width="50" alt="Voting Down Glyphs" />
                        </a>

                        @if (@Model.RelatedAnswers[i].MainAnswer.Accepted == true)
                        {
                            <img src="~/Images/checkmark.png" alt="Check Mark means Answer is Accepted" width="50" />
                        }
                    </div>
                    <div class="divAnswer col-md-9">
                        @Model.RelatedAnswers[i].MainAnswer.Answer
                    </div>
                    <div class="divAuthorDetails col-md-2">
                        <div class="divGenericPerson">
                            <img src="~/Images/GenericPerson.png" height="70" width="50" alt="Generic Person Photo" />
                        </div>
                        <div class="divAuthor">@Model.RelatedAnswers[i].AnswerUserName</div>
                        <div class="divTime">@Model.RelatedAnswers[i].MainAnswer.AnswerDTS</div>
                    </div>
                    <div class="clearfix"></div>
                    <div class="divButtonChoices">
                        @* If Question Writer *@

                        @if (@Model.QuestionUserName == @Model.RelatedAnswers[i].AnswerUserName && @Model.RelatedAnswers[i].MainAnswer.Accepted == false)
                        {
                            <a class="btn btn-default btn-sm" href="question_id=@Model.RelatedAnswers[i].MainAnswer.QuestionID&answer_id=@Model.RelatedAnswers[i].MainAnswer.AnswerID">Mark As Answer</a>
                        }
                        <a class="btn btn-default btn-sm" href="../Home/Comment?question_id=@Model.RelatedAnswers[i].MainAnswer.QuestionID&answer_id=@Model.RelatedAnswers[i].MainAnswer.AnswerID">Comment</a>
                    </div>
                </div>

                @*
                    Answer Comments:
                    0 - answerID, 1 - commentID, 2 - Comment, 3 - Author, 4 - TimeStamp
                *@

                if (Model.RelatedAnswers[i].RelatedAnswerComments != null)
                {
                    for (int j = 0; j < Model.RelatedAnswers[i].RelatedAnswerComments.Count; j++)
                    {
                        @*  For Each of the Answer Comments *@
                        <div class="divCAJumbo jumbotron row">
                            <div class="divComment col-md-10">
                                @Model.RelatedAnswers[i].RelatedAnswerComments[j].AComment.AComment
                            </div>
                            <div class="divAuthorDetails col-md-2">
                                <div class="divGenericPerson">
                                    <img src="~/Images/GenericPerson.png" height="70" width="50" alt="Generic Person Photo" />
                                </div>
                                <div class="divAuthor">@Model.RelatedAnswers[i].RelatedAnswerComments[j].ACUserName</div>
                                <div class="divTime">@Model.RelatedAnswers[i].RelatedAnswerComments[j].AComment.AcommentDTS</div>
                            </div>
                            <div class="clearfix"></div>
                        </div>
                    }
                }
            }
        }
    </div>
</div>